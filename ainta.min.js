/**
 * https://www.npmjs.com/package/@0bdx/ainta
 * @version 0.0.15
 * @license Copyright (c) 2023 0bdx <0@0bdx.com> (0bdx.com)
 * SPDX-License-Identifier: MIT
 */
const t="array",n="bigint",e="boolean",o="function",i="null",r="number",f="object",s="string",l="symbol",u="undefined",c="gte",a="is",p="key",y="least",g="lte",b="max",h="min",d="mod",m="most",v="open",k="pass",j="rx",x="type",A="types",O="an ",$=O+t,w="a dictionary",N=O+f,R=a+" ",E="one",z=" not ",I=" of ",U=" `options.",q="the"+U+A+"` ",B="cannot be validated,"+U,C=x+" ",D=R+$,F=R+i,G=R+"the special `NaN` value",H=R+C,J=a+z,K=" "+J,L=K+"in ",M=z+O+t,P=J+O+t,Q=z+"a regular ",S=z+C,T=(t,n,e)=>(t?t+": ":"")+(n?`\`${n}\` `:e||"A value "),V=Array.isArray,W=t=>!V(t)&&-1!==[n,e,o,r,f,s,l,u].indexOf(t),X=t=>"'"+(Array.isArray(t)?t.join(":"):t)+"'",Y=X(e),Z=X(r),_=X(o),tt=X(f),nt=X(s),et=X(e+":"+r+":"+s),ot=t=>{
const n=V(t)?t.join(":"):t
return encodeURI(n.length<=32?n:`${n.slice(0,21)}...${n.slice(-8)}`).replace(/%20/g," ")
},it=t=>X(ot(t)),rt=t=>X(t.map((t=>V(t)?`[${t.join(":")}]`:t)).join(":")),ft=(t,n,o,i)=>{if(o){
const o=null===n?F+M:V(n)?n.length?"":"is empty":H+X(typeof n)+M
if(o)return B+t+"` "+o
let f=!1
for(let o=0,l=n.length;o<l;o++){const l=n[o],u=typeof l,c=null===l?F+S+et:V(l)?D+S+et:u!==e&&u!==r&&u!==s?H+X(u)+z+et:""
if(c)return B+t+"["+o+"]` "+c
u===i&&(f=!0)}if(!f)return B+t+"` contains no "+i+"s"}},st=(t,n,o)=>{if(o){
const o=null===n?F+S+Y:V(n)?D+S+Y:typeof n!==e?H+X(typeof n)+z+Y:""
if(o)return B+t+"` "+o}},lt=(t,n,e,o,i)=>{if(e){
const e=null===n?F+S+Z:V(n)?D+S+Z:typeof n!==r?H+X(typeof n)+z+Z:isNaN(n)?G:o&&!n?"is zero":i&&n<0?"is negative":""
if(e)return B+t+"` "+e}},ut=(t,n,e)=>{if(e){let e=null===n?F+S+tt:V(n)?D+S+tt:typeof n!==f?H+X(typeof n)+z+tt:""
if(e)return B+t+"` "+e
const i=n.test
if(e=null===i?F+S+_:V(i)?D+S+_:typeof i!==o?H+X(typeof i)+z+_:"",e)return B+t+".test` "+e}},ct=(t,n)=>{if(n){
let n=null===t?F+S+tt:V(t)?D+S+tt:typeof t!==f?H+X(typeof t)+z+tt:""
if(n)return B+"schema` "+n
for(const e in t){const o=t[e]
if(n=null===o?"` "+F+S+tt:V(o)?"` "+D+S+tt:typeof o!==f?"` "+H+X(typeof o)+z+tt:"",!n)t:for(const t in o){const e=o[t]
if(t===A)if(n=null===e?"."+A+"` "+F+z+$:V(e)?"":"."+A+"` "+H+X(typeof e)+z+$,!n)for(let o=0,i=e.length;o<i;o++){
const i=e[o]
if(V(i))for(let e=0,r=i.length;e<r;e++){const r=i[e]
if(n=null===r?F+S+nt:V(r)?D+S+nt:typeof r!==s?H+X(typeof r)+z+nt:W(r)?"":it(r)+z+"known",n){n="."+t+"["+o+"]["+e+"]` "+n
break t}}else if(n=null===i?F+S+nt:typeof i!==s?H+X(typeof i)+z+nt:W(i)?"":it(i)+z+"known",n){n="."+t+"["+o+"]` "+n
break t}}}if(n)return B+"schema."+e+n}}},at=(t,n,e)=>{if(e){const e=null===n?F+M:V(n)?"":H+X(typeof n)+M
if(e)return B+t+"` "+e
for(let e=0,o=n.length;e<o;e++){
const o=n[e],i=null===o?F+S+nt:V(o)?D+S+nt:typeof o!==s?H+X(typeof o)+z+nt:W(o)?"":it(o)+z+"known"
if(i)return B+t+"["+e+"]` "+i}}},pt={}
function yt(t,n,e=pt){const o=e.type,i=typeof t
if(i===o)return!1
const r=T(e.begin,n),f=x in e,l=f&&V(o)
if(f&&l){const t=at(x,o,!0)
if(t)return r+t}else{const t=f?null===o?F+S+nt:typeof o!==s?H+X(typeof o)+z+nt:W(o)?"":X(ot(o))+z+"known":J+"set"
if(t)return r+B+x+"` "+t}if(!l)return r+(null===t?F+S:V(t)?D+S:H+X(i)+z)+X(o)
if(!V(t))return r+P
const u=o.length,c=t.length
if(!u)return!1
for(let i=0;i<c;i++){const r=t[i]
let f=!1
for(let t=0;t<u;t++)if(typeof r===o[t]){f=!0
break}if(!f){const t="["+i+"]"
return T(e.begin,n&&n+t,"`"+t+I+$+"` ")+(null===r?F+S:V(r)?D+S:H+X(typeof r)+z)+X(o.join(":"))}}return!1}
function gt(t,n,e=pt){let o=yt(t,n,{...e,type:r})
if(o)return o
const i=e.gte,f=void 0!==i,s=e.is,l=void 0!==s,u=e.lte,p=void 0!==u,y=e.mod,b=void 0!==y
return o=lt(c,i,f)||ft(a,s,l,r)||lt(g,u,p)||lt(d,y,b,!0)||(f&&p&&i>u?B+"gte` > `options.lte`":isNaN(t)?G+Q+r:l&&-1==s.indexOf(t)?t+L+it(s.join(":")):f&&i>t?t+K+c+" "+i:p&&u<t?t+K+g+" "+u:b&&t%y?t+" is not divisible by "+y:""),
!!o&&T(e.begin,n)+o}function bt(t,n,e=pt){let i=yt(t,n,{...e,type:s})
if(i)return i
const r=e.is,f=void 0!==r,l=e.max,u=void 0!==l,c=e.min,p=void 0!==c,y=e.rx,g=void 0!==y
return i=ft(a,r,f,s)||lt(b,l,u,!1,!0)||lt(h,c,p,!1,!0)||ut(j,y,g)||(u&&p&&l<c?B+b+"` <"+U+h+"`":f&&-1==r.indexOf(t)?it(t)+L+it(r.join(":")):u&&l<t.length?it(t)+K+b+" "+l:p&&c>t.length?it(t)+K+h+" "+c:g&&!y.test(t)?it(t)+" fails "+(y instanceof RegExp?y:"custom test "+o):""),
!!i&&T(e.begin,n)+i}function ht(t,n,e=pt){let o=null===t?F+Q+f:V(t)?D+Q+f:typeof t!==f?H+X(typeof t)+z+tt:""
if(o)return T(e.begin,n)+o
const r=e.open,s=void 0!==r,l=e.schema,c=void 0!==l
return o=st(v,r,s)||ct(l,c),o?T(e.begin,n,"An object ")+o:function(t,n,e,o){const{begin:r,open:f,schema:s}=n
let l
if(e)for(const e in s){const{types:r}=s[e],f=t[e],c=typeof f,a=r&&r.filter(V)
if(r&&r.length)if(a.length&&V(f)){for(const t of a)if(0===t.length)continue
const t=f.length
let u,c=0,p=!1
t:for(const n of a){for(c=0;c<t;c++){u=f[c]
let t=!1
for(let e=0,o=n.length;e<o;e++)if(typeof u===n[e]){t=!0
break}if(!t)continue t}p=!0
break t}if(!p){const t=typeof u
l=[`${e}[${c}]`,R+(null===u?i:V(u)?$:C+X(t))+","+z+(1===a.length?q:E+I+q)+rt(r)]
break}const y=o?o+"."+e:e+I+N
for(let o=0;o<t;o++){const t=f[o],i={number:gt,object:ht,string:bt}[typeof t]
if(i){const r=i(t,`${y}[${o}]`,{begin:n.begin,...s[e]})
if(r)return r}}}else{if(-1===r.indexOf(c)){l=[e,R+(null===f?i:V(f)?$:C+X(c))+","+z+(1===r.length?q:E+I+q)+rt(r)]
break}{const t={number:gt,object:ht,string:bt}[c]
if(t){const i=t(f,o?o+"."+e:e+I+N,{begin:n.begin,...s[e]})
if(i)return i}}}else if(c===u){l=[e,R+"missing"]
break}}if(!f)for(const n in t)if(!s||!s[n]){l=[n,"is unexpected"]
break}return!!l&&T(r,o&&o+"."+l[0],"`"+l[0]+I+N+"` ")+l[1]}(t,e,c,n)}function dt(t,n,e=pt){
if(!V(t))return T(e.begin,n)+(null===t?F:H+X(typeof t))+M
const o=t.length,l=e.least,u=void 0!==l,c=e.most,a=void 0!==c,p=e.pass,g=void 0!==p,b=e.types,h=void 0!==b,d=lt(y,l,u,!1,!0)||lt(m,c,a,!1,!0)||st(k,p,g)||at(A,b,h)||(u&&a&&l>c?B+"least` > `options.most`":u&&l>o?"has length "+o+" < `options."+y+"` "+l:a&&c<o?"has length "+o+" > `options."+m+"` "+c:"")
return d?T(e.begin,n,"An array ")+d:function(t,n,e,o,l){const{begin:u,pass:c,types:a}=e,p=o&&a.length
for(let o=0;o<n;o++){const n=t[o],y=typeof n,g="["+o+"]"
if(p&&-1===a.indexOf(y))return T(u,l&&l+g,"`"+g+I+$+"` ")+R+(null===n?i:V(n)?$:C+X(y))+","+z+(1===a.length?q+X(a[0]):E+I+q+it(a.join(":")))
if(p&&y===f){const t=null===n?i:V(n)?$:""
if(t)return T(u,l&&l+g,"`"+g+I+$+"` ")+R+t+","+Q+f}if(c){const t=l?l+"["+o+"]":g+I+$
let i
switch(y){case r:if(i=gt(n,t,e),i)return i
break
case f:if(null===n)break
if(Array.isArray(n))break
if(i=ht(n,t,e),i)return i
break
case s:if(i=bt(n,t,e),i)return i}}}return!1}(t,o,e,h,n)}function mt(t,n,o=pt){let i=yt(t,n,{...o,type:e})
if(i)return i
const r=o.is,f=void 0!==r
return i=ft(a,r,f,e)||(f&&-1==r.indexOf(t)?t+L+it(r.join(":")):""),!!i&&T(o.begin,n)+i}function vt(t,n,e=pt){
let l=null===t?F+Q+f:V(t)?D+Q+f:typeof t!==f?H+X(typeof t)+z+tt:""
if(l)return T(e.begin,n)+l
const u=Object.entries(t),c=u.length,a=e.key,g=void 0!==a,b=e.least,h=void 0!==b,d=e.most,v=void 0!==d,j=e.pass,x=void 0!==j,O=e.types,N=void 0!==O
return l=ut(p,a,g)||lt(y,b,h,!1,!0)||lt(m,d,v,!1,!0)||st(k,j,x)||at(A,O,N)||(h&&v&&b>d?B+"least` > `options.most`":h&&b>c?"has length "+c+" < `options."+y+"` "+b:v&&d<c?"has length "+c+" > `options."+m+"` "+d:""),
l?T(e.begin,n,"A dictionary ")+l:function(t,n,e,l,u,c){const{begin:a,key:p,pass:y,types:g}=e,b=u&&g.length
for(let u=0;u<n;u++){const[n,h]=t[u],d=typeof h
if(l&&!p.test(n)){const t=ot(n)
return T(a,c&&c+"."+t,"`"+t+I+w+"` ")+"fails "+(p instanceof RegExp?p:"custom test "+o)}
if(b&&-1===g.indexOf(d))return T(a,c&&c+"."+n,"`"+n+I+w+"` ")+R+(null===h?i:V(h)?$:C+X(d))+","+z+(1===g.length?q+X(g[0]):E+I+q+it(g.join(":")))
if(y){const t=c?c+"."+n:n+I+w
let o
switch(d){case r:if(o=gt(h,t,e),o)return o
break
case f:if(null===h)break
if(Array.isArray(h))break
if(o=ht(h,t,e),o)return o
break
case s:if(o=bt(h,t,e),o)return o}}}return!1}(u,c,e,g,N,n)}function kt(t,n,e=pt){return yt(t,n,{...e,type:o})}
function jt(t,n,e=pt){return null!==t&&T(e.begin,n)+(V(t)?D:H+X(typeof t))+z+i}function xt(t=pt,...n){const e=[]
return[e,...n.map((n=>At(t,n,e)))]}const At=(t,n,e)=>(o,i,r)=>{const f=n(o,i,{...t,...r})
return f&&e.push(f),f}
export{dt as aintaArray,mt as aintaBoolean,vt as aintaDictionary,kt as aintaFunction,jt as aintaNull,gt as aintaNumber,ht as aintaObject,bt as aintaString,yt as aintaType,xt as default}
