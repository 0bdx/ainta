/**
 * https://www.npmjs.com/package/@0bdx/ainta
 * @version 0.0.13
 * @license Copyright (c) 2023 0bdx <0@0bdx.com> (0bdx.com)
 * SPDX-License-Identifier: MIT
 */
const t="array",n="bigint",e="boolean",o="function",i="null",r="number",s="object",f="string",l="symbol",u="undefined",c="enum",a="gte",p="key",y="least",g="lte",b="max",d="min",h="mod",m="most",v="open",k="pass",x="rx",A="type",j="types",N="an ",O=N+t,w="a dictionary",$=N+s,R="is ",E="one",z=" not ",I=" of ",U="the",q=" `options.",B="cannot be validated,"+q,C=A+" ",D=R+O,F=R+i,G=R+"the special `NaN` value",H=R+C,J=" is"+z,K=z+N+t,L=z+"a regular ",M=z+C,P=(t,n,e)=>(t?t+": ":"")+(n?`\`${n}\` `:e||"A value "),Q=Array.isArray,S=t=>-1!==[n,e,o,r,s,f,l,u].indexOf(t),T=t=>"'"+t+"'",V=T(e),W=T(r),X=T(o),Y=T(s),Z=T(f),_=t=>encodeURI(t.length<=32?t:`${t.slice(0,21)}...${t.slice(-8)}`).replace(/%20/g," "),tt=t=>T(_(t)),nt=(t,n,e,o)=>{
if(e){const e=null===n?F+K:Q(n)?o||n.length?"":"is empty":H+T(typeof n)+K
if(e)return B+t+"` "+e
for(let e=0,i=n.length;e<i;e++){
const i=n[e],r=null===i?F+M+Z:Q(i)?D+M+Z:typeof i!==f?H+T(typeof i)+z+Z:o&&!S(i)?tt(i)+z+"known":""
if(r)return B+t+"["+e+"]` "+r}}},et=(t,n,o)=>{if(o){const o=null===n?F+M+V:Q(n)?D+M+V:typeof n!==e?H+T(typeof n)+z+V:""
if(o)return B+t+"` "+o}},ot=(t,n,e,o,i)=>{if(e){
const e=null===n?F+M+W:Q(n)?D+M+W:typeof n!==r?H+T(typeof n)+z+W:isNaN(n)?G:o&&!n?"is zero":i&&n<0?"is negative":""
if(e)return B+t+"` "+e}},it=(t,n,e)=>{if(e){let e=null===n?F+M+Y:Q(n)?D+M+Y:typeof n!==s?H+T(typeof n)+z+Y:""
if(e)return B+t+"` "+e
const i=n.test
if(e=null===i?F+M+X:Q(i)?D+M+X:typeof i!==o?H+T(typeof i)+z+X:"",e)return B+t+".test` "+e}},rt=(t,n)=>{if(n){
let n=null===t?F+M+Y:Q(t)?D+M+Y:typeof t!==s?H+T(typeof t)+z+Y:""
if(n)return B+"schema` "+n
for(const e in t){const o=t[e]
if(n=null===o?"` "+F+M+Y:Q(o)?"` "+D+M+Y:typeof o!==s?"` "+H+T(typeof o)+z+Y:"",!n)t:for(const t in o){const e=o[t]
if(t===j)if(n=null===e?"."+j+"` "+F+z+O:Q(e)?"":"."+j+"` "+H+T(typeof e)+z+O,!n)for(let o=0,i=e.length;o<i;o++){
const i=e[o]
if(n=null===i?F+M+Z:Q(i)?D+M+Z:typeof i!==f?H+T(typeof i)+z+Z:S(i)?"":tt(i)+z+"known",n){n="."+t+"["+o+"]` "+n
break t}}}if(n)return B+"schema."+e+n}}},st={}
function ft(t,n,e=st){const o=typeof t
if(o===e.type)return!1
const i=P(e.begin,n),r=i+B+A+"` "
if(!(A in e))return`${r}is${z}set`
const s=e.type
return null===s?r+F+M+Z:Q(s)?r+D+M+Z:typeof s!==f?r+H+T(typeof s)+z+Z:S(s)?i+(null===t?F+M:Q(t)?D+M:H+T(o)+z)+T(s):r+T(_(s))+z+"known"
}function lt(t,n,e=st){let o=ft(t,n,{...e,type:r})
if(o)return o
const i=e.gte,s=void 0!==i,f=e.lte,l=void 0!==f,u=e.mod,c=void 0!==u
return o=ot(a,i,s)||ot(g,f,l)||ot(h,u,c,!0)||(s&&l&&i>f?B+"gte` > `options.lte`":isNaN(t)?G+L+r:s&&i>t?t+J+a+" "+i:l&&f<t?t+J+g+" "+f:c&&t%u?t+" is not divisible by "+u:""),
!!o&&P(e.begin,n)+o}function ut(t,n,e=st){let i=ft(t,n,{...e,type:f})
if(i)return i
const r=e.enum,s=void 0!==r,l=e.max,u=void 0!==l,a=e.min,p=void 0!==a,y=e.rx,g=void 0!==y
return i=nt(c,r,s)||ot(b,l,u,!1,!0)||ot(d,a,p,!1,!0)||it(x,y,g)||(u&&p&&l<a?B+"max` < `options.min`":s&&-1==r.indexOf(t)?tt(t)+" is not in "+tt(r.join(":")):u&&l<t.length?tt(t)+J+b+" "+l:p&&a>t.length?tt(t)+J+d+" "+a:g&&!y.test(t)?tt(t)+" fails "+(y instanceof RegExp?y:"custom test "+o):""),
!!i&&P(e.begin,n)+i}function ct(t,n,e=st){let o=null===t?F+L+s:Q(t)?D+L+s:typeof t!==s?H+T(typeof t)+z+Y:""
if(o)return P(e.begin,n)+o
const r=e.open,f=void 0!==r,l=e.schema,c=void 0!==l
return o=et(v,r,f)||rt(l,c),o?P(e.begin,n,"An object ")+o:function(t,n,e,o){const{begin:r,open:s,schema:f}=n
let l
if(e)for(const e in f){const{types:r}=f[e],s=t[e],c=typeof s
if(r&&r.length){if(-1===r.indexOf(c)){const t=U+q+j+"` "
l=[e,R+(null===s?i:Q(s)?O:C+T(c))+","+z+(1===r.length?t+T(r[0]):E+I+t+tt(r.join(":")))]
break}{const t={number:lt,string:ut}[c]
if(t){const i=t(s,o?o+"."+e:e+I+$,{begin:n.begin,...f[e]})
if(i)return i}}}else if(c===u){l=[e,R+"missing"]
break}}if(!s)for(const n in t)if(!f||!f[n]){l=[n,"is unexpected"]
break}return!!l&&P(r,o&&o+"."+l[0],"`"+l[0]+I+$+"` ")+l[1]}(t,e,c,n)}function at(t,n,e=st){
if(!Q(t))return P(e.begin,n)+(null===t?F:H+T(typeof t))+K
const o=t.length,l=e.least,u=void 0!==l,c=e.most,a=void 0!==c,p=e.pass,g=void 0!==p,b=e.types,d=void 0!==b,h=ot(y,l,u,!1,!0)||ot(m,c,a,!1,!0)||et(k,p,g)||nt(j,b,d,!0)||(u&&a&&l>c?B+"least` > `options.most`":u&&l>o?"has length "+o+" < `options."+y+"` "+l:a&&c<o?"has length "+o+" > `options."+m+"` "+c:"")
return h?P(e.begin,n,"An array ")+h:function(t,n,e,o,l){const{begin:u,pass:c,types:a}=e,p=o&&a.length
for(let o=0;o<n;o++){const n=t[o],y=typeof n,g="["+o+"]"
if(p&&-1===a.indexOf(y)){const t=U+q+j+"` "
return P(u,l&&l+g,"`"+g+I+O+"` ")+R+(null===n?i:Q(n)?O:C+T(y))+","+z+(1===a.length?t+T(a[0]):E+I+t+tt(a.join(":")))}
if(p&&y===s){const t=null===n?i:Q(n)?O:""
if(t)return P(u,l&&l+g,"`"+g+I+O+"` ")+R+t+","+L+s}if(c){const t=l?l+"["+o+"]":g+I+O
let i
switch(y){case r:if(i=lt(n,t,e),i)return i
break
case s:if(null===n)break
if(Array.isArray(n))break
if(i=ct(n,t,e),i)return i
break
case f:if(i=ut(n,t,e),i)return i}}}return!1}(t,o,e,d,n)}function pt(t,n,o=st){return ft(t,n,{...o,type:e})}
function yt(t,n,e=st){let l=null===t?F+L+s:Q(t)?D+L+s:typeof t!==s?H+T(typeof t)+z+Y:""
if(l)return P(e.begin,n)+l
const u=Object.entries(t),c=u.length,a=e.key,g=void 0!==a,b=e.least,d=void 0!==b,h=e.most,v=void 0!==h,x=e.pass,A=void 0!==x,N=e.types,$=void 0!==N
return l=it(p,a,g)||ot(y,b,d,!1,!0)||ot(m,h,v,!1,!0)||et(k,x,A)||nt(j,N,$,!0)||(d&&v&&b>h?B+"least` > `options.most`":d&&b>c?"has length "+c+" < `options."+y+"` "+b:v&&h<c?"has length "+c+" > `options."+m+"` "+h:""),
l?P(e.begin,n,"A dictionary ")+l:function(t,n,e,l,u,c){const{begin:a,key:p,pass:y,types:g}=e,b=u&&g.length
for(let u=0;u<n;u++){const[n,d]=t[u],h=typeof d
if(l&&!p.test(n)){const t=_(n)
return P(a,c&&c+"."+t,"`"+t+I+w+"` ")+"fails "+(p instanceof RegExp?p:"custom test "+o)}if(b&&-1===g.indexOf(h)){
const t=U+q+j+"` "
return P(a,c&&c+"."+n,"`"+n+I+w+"` ")+R+(null===d?i:Q(d)?O:C+T(h))+","+z+(1===g.length?t+T(g[0]):E+I+t+tt(g.join(":")))}
if(y){const t=c?c+"."+n:n+I+w
let o
switch(h){case r:if(o=lt(d,t,e),o)return o
break
case s:if(null===d)break
if(Array.isArray(d))break
if(o=ct(d,t,e),o)return o
break
case f:if(o=ut(d,t,e),o)return o}}}return!1}(u,c,e,g,$,n)}function gt(t,n,e=st){return ft(t,n,{...e,type:o})}
function bt(t,n,e=st){return null!==t&&P(e.begin,n)+(Q(t)?D:H+T(typeof t))+z+i}function dt(t=st,...n){const e=[]
return[e,...n.map((n=>ht(t,n,e)))]}const ht=(t,n,e)=>(o,i,r)=>{const s=n(o,i,{...t,...r})
return s&&e.push(s),s}
export{at as aintaArray,pt as aintaBoolean,yt as aintaDictionary,gt as aintaFunction,bt as aintaNull,lt as aintaNumber,ct as aintaObject,ut as aintaString,ft as aintaType,dt as default}
