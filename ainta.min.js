/**
 * https://www.npmjs.com/package/@0bdx/ainta
 * @version 0.0.16
 * @license Copyright (c) 2023 0bdx <0@0bdx.com> (0bdx.com)
 * SPDX-License-Identifier: MIT
 */
const t="array",e="bigint",n="boolean",o="function",i="null",r="number",f="object",s="string",l="symbol",u="undefined",c="gte",a="is",p="key",y="least",g="lte",b="max",d="min",h="mod",v="most",k="open",m="pass",j="rx",x="type",A="types",O="an ",$=O+t,w="a class",N="a dictionary",R=O+f,E=a+" ",z="one",I=" not ",U=" of ",q=" `options.",B="the"+q+A+"` ",C="cannot be validated,"+q,D=x+" ",F=E+$,G=E+i,H=E+"the special `NaN` value",J=E+D,K=a+I,L=" "+K,M=L+"in ",P=I+O+t,Q=K+O+t,S=I+"a regular ",T=I+D,V={}
function W(t,e,n=V){let o=vt(t,e,{...n,type:r})
if(o)return o
const i=n.gte,f=void 0!==i,s=n.is,l=void 0!==s,u=n.lte,p=void 0!==u,y=n.mod,b=void 0!==y
return o=bt(c,i,f)||pt(a,s,l,r)||bt(g,u,p)||bt(h,y,b,!0)||(f&&p&&i>u?C+"gte` > `options.lte`":isNaN(t)?H+S+r:l&&-1==s.indexOf(t)?t+M+ut(s.join(":")):f&&i>t?t+L+c+" "+i:p&&u<t?t+L+g+" "+u:b&&t%y?t+" is not divisible by "+y:""),
!!o&&Z(n.begin,e)+o}function X(t,e,n=V){let o=null===t?G+S+f:_(t)?F+S+f:typeof t!==f?J+et(typeof t)+I+rt:""
if(o)return Z(n.begin,e)+o
const i=n.open,r=void 0!==i,s=n.schema,l=void 0!==s
return o=gt(k,i,r)||ht(s,l),o?Z(n.begin,e,"An object ")+o:at(t,n,l,R,e)}function Y(t,e,n=V){let i=vt(t,e,{...n,type:s})
if(i)return i
const r=n.is,f=void 0!==r,l=n.max,u=void 0!==l,c=n.min,p=void 0!==c,y=n.rx,g=void 0!==y
return i=pt(a,r,f,s)||bt(b,l,u,!1,!0)||bt(d,c,p,!1,!0)||dt(j,y,g)||(u&&p&&l<c?C+b+"` <"+q+d+"`":f&&-1==r.indexOf(t)?ut(t)+M+ut(r.join(":")):u&&l<t.length?ut(t)+L+b+" "+l:p&&c>t.length?ut(t)+L+d+" "+c:g&&!y.test(t)?ut(t)+" fails "+(y instanceof RegExp?y:"custom test "+o):""),
!!i&&Z(n.begin,e)+i}
const Z=(t,e,n)=>(t?t+": ":"")+(e?`\`${e}\` `:n||"A value "),_=Array.isArray,tt=t=>!_(t)&&-1!==[e,n,o,r,f,s,l,u].indexOf(t),et=t=>"'"+(Array.isArray(t)?t.join(":"):t)+"'",nt=et(n),ot=et(r),it=et(o),rt=et(f),ft=et(s),st=et(n+":"+r+":"+s),lt=t=>{
const e=_(t)?t.join(":"):t
return encodeURI(e.length<=32?e:`${e.slice(0,21)}...${e.slice(-8)}`).replace(/%20/g," ")
},ut=t=>et(lt(t)),ct=t=>et(t.map((t=>_(t)?`[${t.join(":")}]`:t)).join(":")),at=(t,e,n,o,r)=>{
const{begin:f,open:s,schema:l}=e
let c
if(n)for(const n in l){const{types:f}=l[n],s=t[n],a=typeof s,p=f&&f.filter(_)
if(f&&f.length)if(p.length&&_(s)){for(const t of p)if(0===t.length)continue
const t=s.length
let u,a=0,y=!1
t:for(const e of p){for(a=0;a<t;a++){u=s[a]
let t=!1
for(let n=0,o=e.length;n<o;n++)if(typeof u===e[n]){t=!0
break}if(!t)continue t}y=!0
break t}if(!y){const t=typeof u
c=[`${n}[${a}]`,E+(null===u?i:_(u)?$:D+et(t))+","+I+(1===p.length?B:z+U+B)+ct(f)]
break}const g=r?r+"."+n:n+U+o
for(let o=0;o<t;o++){const t=s[o],i={number:W,object:X,string:Y}[typeof t]
if(i){const r=i(t,`${g}[${o}]`,{begin:e.begin,...l[n]})
if(r)return r}}}else{if(-1===f.indexOf(a)){c=[n,E+(null===s?i:_(s)?$:D+et(a))+","+I+(1===f.length?B:z+U+B)+ct(f)]
break}{const t={function:kt,number:W,object:X,string:Y}[a]
if(t){const i=t(s,r?r+"."+n:n+U+o,{begin:e.begin,...l[n]})
if(i)return i}}}else if(a===u){c=[n,E+"missing"]
break}}if(!s)for(const e in t)if(!l||!l[e]){c=[e,"is unexpected"]
break}return!!c&&Z(f,r&&r+"."+c[0],"`"+c[0]+U+o+"` ")+c[1]},pt=(t,e,o,i)=>{if(o){
const o=null===e?G+P:_(e)?e.length?"":"is empty":J+et(typeof e)+P
if(o)return C+t+"` "+o
let f=!1
for(let o=0,l=e.length;o<l;o++){
const l=e[o],u=typeof l,c=null===l?G+T+st:_(l)?F+T+st:u!==n&&u!==r&&u!==s?J+et(u)+I+st:""
if(c)return C+t+"["+o+"]` "+c
u===i&&(f=!0)}if(!f)return C+t+"` contains no "+i+"s"}},yt=(t,e,n)=>{if(n){const n=null===e?G+P:_(e)?"":J+et(typeof e)+P
if(n)return C+t+"` "+n
for(let n=0,o=e.length;n<o;n++){
const o=e[n],i=null===o?G+T+ft:_(o)?F+T+ft:typeof o!==s?J+et(typeof o)+I+ft:tt(o)?"":ut(o)+I+"known"
if(i)return C+t+"["+n+"]` "+i}}},gt=(t,e,o)=>{if(o){
const o=null===e?G+T+nt:_(e)?F+T+nt:typeof e!==n?J+et(typeof e)+I+nt:""
if(o)return C+t+"` "+o}},bt=(t,e,n,o,i)=>{if(n){
const n=null===e?G+T+ot:_(e)?F+T+ot:typeof e!==r?J+et(typeof e)+I+ot:isNaN(e)?H:o&&!e?"is zero":i&&e<0?"is negative":""
if(n)return C+t+"` "+n}},dt=(t,e,n)=>{if(n){let n=null===e?G+T+rt:_(e)?F+T+rt:typeof e!==f?J+et(typeof e)+I+rt:""
if(n)return C+t+"` "+n
const i=e.test
if(n=null===i?G+T+it:_(i)?F+T+it:typeof i!==o?J+et(typeof i)+I+it:"",n)return C+t+".test` "+n}},ht=(t,e)=>{if(e){
let e=null===t?G+T+rt:_(t)?F+T+rt:typeof t!==f?J+et(typeof t)+I+rt:""
if(e)return C+"schema` "+e
for(const n in t){const o=t[n]
if(e=null===o?"` "+G+T+rt:_(o)?"` "+F+T+rt:typeof o!==f?"` "+J+et(typeof o)+I+rt:"",!e)t:for(const t in o){const n=o[t]
if(t===A)if(e=null===n?"."+A+"` "+G+I+$:_(n)?"":"."+A+"` "+J+et(typeof n)+I+$,!e)for(let o=0,i=n.length;o<i;o++){
const i=n[o]
if(_(i))for(let n=0,r=i.length;n<r;n++){const r=i[n]
if(e=null===r?G+T+ft:_(r)?F+T+ft:typeof r!==s?J+et(typeof r)+I+ft:tt(r)?"":ut(r)+I+"known",e){
e="."+t+"["+o+"]["+n+"]` "+e
break t}}else if(e=null===i?G+T+ft:typeof i!==s?J+et(typeof i)+I+ft:tt(i)?"":ut(i)+I+"known",e){e="."+t+"["+o+"]` "+e
break t}}}if(e)return C+"schema."+n+e}}}
function vt(t,e,n=V){const o=n.type,i=typeof t
if(i===o)return!1
const r=Z(n.begin,e),f=x in n,l=f&&_(o)
if(f&&l){const t=yt(x,o,!0)
if(t)return r+t}else{const t=f?null===o?G+T+ft:typeof o!==s?J+et(typeof o)+I+ft:tt(o)?"":et(lt(o))+I+"known":K+"set"
if(t)return r+C+x+"` "+t}if(!l)return r+(null===t?G+T:_(t)?F+T:J+et(i)+I)+et(o)
if(!_(t))return r+Q
const u=o.length,c=t.length
if(!u)return!1
for(let i=0;i<c;i++){const r=t[i]
let f=!1
for(let t=0;t<u;t++)if(typeof r===o[t]){f=!0
break}if(!f){const t="["+i+"]"
return Z(n.begin,e&&e+t,"`"+t+U+$+"` ")+(null===r?G+T:_(r)?F+T:J+et(typeof r)+I)+et(o.join(":"))}}return!1}
function kt(t,e,n=V){let i=vt(t,e,{...n,type:o})
if(i)return i
const r=n.open,f=void 0!==r,s=n.schema,l=void 0!==s
return i=gt(k,r,f)||ht(s,l),i?Z(n.begin,e,"A class ")+i:at(t,n,l,w,e)}function mt(t,e,n=V){
if(!_(t))return Z(n.begin,e)+(null===t?G:J+et(typeof t))+P
const l=t.length,u=n.least,c=void 0!==u,a=n.most,p=void 0!==a,g=n.pass,b=void 0!==g,d=n.types,h=void 0!==d,k=bt(y,u,c,!1,!0)||bt(v,a,p,!1,!0)||gt(m,g,b)||yt(A,d,h)||(c&&p&&u>a?C+"least` > `options.most`":c&&u>l?"has length "+l+" < `options."+y+"` "+u:p&&a<l?"has length "+l+" > `options."+v+"` "+a:"")
return k?Z(n.begin,e,"An array ")+k:function(t,e,n,l,u){const{begin:c,pass:a,types:p}=n,y=l&&p.length
for(let l=0;l<e;l++){const e=t[l],g=typeof e,b="["+l+"]"
if(y&&-1===p.indexOf(g))return Z(c,u&&u+b,"`"+b+U+$+"` ")+E+(null===e?i:_(e)?$:D+et(g))+","+I+(1===p.length?B+et(p[0]):z+U+B+ut(p.join(":")))
if(y&&g===f){const t=null===e?i:_(e)?$:""
if(t)return Z(c,u&&u+b,"`"+b+U+$+"` ")+E+t+","+S+f}if(a){const t=u?u+"["+l+"]":b+U+$
let i
switch(g){case o:if(i=kt(e,t,n),i)return i
break
case r:if(i=W(e,t,n),i)return i
break
case f:if(null===e)break
if(Array.isArray(e))break
if(i=X(e,t,n),i)return i
break
case s:if(i=Y(e,t,n),i)return i}}}return!1}(t,l,n,h,e)}function jt(t,e,o=V){let i=vt(t,e,{...o,type:n})
if(i)return i
const r=o.is,f=void 0!==r
return i=pt(a,r,f,n)||(f&&-1==r.indexOf(t)?t+M+ut(r.join(":")):""),!!i&&Z(o.begin,e)+i}function xt(t,e,n=V){
let l=null===t?G+S+f:_(t)?F+S+f:typeof t!==f?J+et(typeof t)+I+rt:""
if(l)return Z(n.begin,e)+l
const u=Object.entries(t),c=u.length,a=n.key,g=void 0!==a,b=n.least,d=void 0!==b,h=n.most,k=void 0!==h,j=n.pass,x=void 0!==j,O=n.types,w=void 0!==O
return l=dt(p,a,g)||bt(y,b,d,!1,!0)||bt(v,h,k,!1,!0)||gt(m,j,x)||yt(A,O,w)||(d&&k&&b>h?C+"least` > `options.most`":d&&b>c?"has length "+c+" < `options."+y+"` "+b:k&&h<c?"has length "+c+" > `options."+v+"` "+h:""),
l?Z(n.begin,e,"A dictionary ")+l:function(t,e,n,l,u,c){const{begin:a,key:p,pass:y,types:g}=n,b=u&&g.length
for(let u=0;u<e;u++){const[e,d]=t[u],h=typeof d
if(l&&!p.test(e)){const t=lt(e)
return Z(a,c&&c+"."+t,"`"+t+U+N+"` ")+"fails "+(p instanceof RegExp?p:"custom test "+o)}
if(b&&-1===g.indexOf(h))return Z(a,c&&c+"."+e,"`"+e+U+N+"` ")+E+(null===d?i:_(d)?$:D+et(h))+","+I+(1===g.length?B+et(g[0]):z+U+B+ut(g.join(":")))
if(y){const t=c?c+"."+e:e+U+N
let i
switch(h){case o:if(i=kt(d,t,n),i)return i
break
case r:if(i=W(d,t,n),i)return i
break
case f:if(null===d)break
if(Array.isArray(d))break
if(i=X(d,t,n),i)return i
break
case s:if(i=Y(d,t,n),i)return i}}}return!1}(u,c,n,g,w,e)}function At(t,e,n=V){
return null!==t&&Z(n.begin,e)+(_(t)?F:J+et(typeof t))+I+i}function Ot(t=V,...e){const n=[]
return[n,...e.map((e=>$t(t,e,n)))]}const $t=(t,e,n)=>(o,i,r)=>{const f=e(o,i,{...t,...r})
return f&&n.push(f),f}
export{mt as aintaArray,jt as aintaBoolean,xt as aintaDictionary,kt as aintaFunction,At as aintaNull,W as aintaNumber,X as aintaObject,Y as aintaString,vt as aintaType,Ot as default}
