/**
 * https://www.npmjs.com/package/@0bdx/ainta
 * @version 0.0.15
 * @license Copyright (c) 2023 0bdx <0@0bdx.com> (0bdx.com)
 * SPDX-License-Identifier: MIT
 */
const t="array",e="bigint",n="boolean",o="function",i="null",r="number",f="object",s="string",l="symbol",u="undefined",c="gte",a="is",p="key",y="least",g="lte",b="max",h="min",d="mod",m="most",k="open",v="pass",j="rx",x="type",A="types",$="an ",w=$+t,N="a dictionary",O=$+f,R=a+" ",E="one",z=" not ",I=" of ",U=" `options.",q="the"+U+A+"` ",B="cannot be validated,"+U,C=x+" ",D=R+w,F=R+i,G=R+"the special `NaN` value",H=R+C,J=a+z,K=" "+J,L=K+"in ",M=z+$+t,P=J+$+t,Q=z+"a regular ",S=z+C,T=(t,e,n)=>(t?t+": ":"")+(e?`\`${e}\` `:n||"A value "),V=Array.isArray,W=t=>!V(t)&&-1!==[e,n,o,r,f,s,l,u].indexOf(t),X=t=>"'"+(Array.isArray(t)?t.join(":"):t)+"'",Y=X(n),Z=X(r),_=X(o),tt=X(f),et=X(s),nt=X(n+":"+r+":"+s),ot=t=>{
const e=V(t)?t.join(":"):t
return encodeURI(e.length<=32?e:`${e.slice(0,21)}...${e.slice(-8)}`).replace(/%20/g," ")
},it=t=>X(ot(t)),rt=t=>X(t.map((t=>V(t)?`[${t.join(":")}]`:t)).join(":")),ft=(t,e,o,i)=>{if(o){
const o=null===e?F+M:V(e)?e.length?"":"is empty":H+X(typeof e)+M
if(o)return B+t+"` "+o
let f=!1
for(let o=0,l=e.length;o<l;o++){const l=e[o],u=typeof l,c=null===l?F+S+nt:V(l)?D+S+nt:u!==n&&u!==r&&u!==s?H+X(u)+z+nt:""
if(c)return B+t+"["+o+"]` "+c
u===i&&(f=!0)}if(!f)return B+t+"` contains no "+i+"s"}},st=(t,e,o)=>{if(o){
const o=null===e?F+S+Y:V(e)?D+S+Y:typeof e!==n?H+X(typeof e)+z+Y:""
if(o)return B+t+"` "+o}},lt=(t,e,n,o,i)=>{if(n){
const n=null===e?F+S+Z:V(e)?D+S+Z:typeof e!==r?H+X(typeof e)+z+Z:isNaN(e)?G:o&&!e?"is zero":i&&e<0?"is negative":""
if(n)return B+t+"` "+n}},ut=(t,e,n)=>{if(n){let n=null===e?F+S+tt:V(e)?D+S+tt:typeof e!==f?H+X(typeof e)+z+tt:""
if(n)return B+t+"` "+n
const i=e.test
if(n=null===i?F+S+_:V(i)?D+S+_:typeof i!==o?H+X(typeof i)+z+_:"",n)return B+t+".test` "+n}},ct=(t,e)=>{if(e){
let e=null===t?F+S+tt:V(t)?D+S+tt:typeof t!==f?H+X(typeof t)+z+tt:""
if(e)return B+"schema` "+e
for(const n in t){const o=t[n]
if(e=null===o?"` "+F+S+tt:V(o)?"` "+D+S+tt:typeof o!==f?"` "+H+X(typeof o)+z+tt:"",!e)t:for(const t in o){const n=o[t]
if(t===A)if(e=null===n?"."+A+"` "+F+z+w:V(n)?"":"."+A+"` "+H+X(typeof n)+z+w,!e)for(let o=0,i=n.length;o<i;o++){
const i=n[o]
if(V(i))for(let n=0,r=i.length;n<r;n++){const r=i[n]
if(e=null===r?F+S+et:V(r)?D+S+et:typeof r!==s?H+X(typeof r)+z+et:W(r)?"":it(r)+z+"known",e){e="."+t+"["+o+"]["+n+"]` "+e
break t}}else if(e=null===i?F+S+et:typeof i!==s?H+X(typeof i)+z+et:W(i)?"":it(i)+z+"known",e){e="."+t+"["+o+"]` "+e
break t}}}if(e)return B+"schema."+n+e}}},at=(t,e,n)=>{if(n){const n=null===e?F+M:V(e)?"":H+X(typeof e)+M
if(n)return B+t+"` "+n
for(let n=0,o=e.length;n<o;n++){
const o=e[n],i=null===o?F+S+et:V(o)?D+S+et:typeof o!==s?H+X(typeof o)+z+et:W(o)?"":it(o)+z+"known"
if(i)return B+t+"["+n+"]` "+i}}},pt={}
function yt(t,e,n=pt){const o=n.type,i=typeof t
if(i===o)return!1
const r=T(n.begin,e),f=x in n,l=f&&V(o)
if(f&&l){const t=at(x,o,!0)
if(t)return r+t}else{const t=f?null===o?F+S+et:typeof o!==s?H+X(typeof o)+z+et:W(o)?"":X(ot(o))+z+"known":J+"set"
if(t)return r+B+x+"` "+t}if(!l)return r+(null===t?F+S:V(t)?D+S:H+X(i)+z)+X(o)
if(!V(t))return r+P
const u=o.length,c=t.length
if(!u)return!1
for(let i=0;i<c;i++){const r=t[i]
let f=!1
for(let t=0;t<u;t++)if(typeof r===o[t]){f=!0
break}if(!f){const t="["+i+"]"
return T(n.begin,e&&e+t,"`"+t+I+w+"` ")+(null===r?F+S:V(r)?D+S:H+X(typeof r)+z)+X(o.join(":"))}}return!1}
function gt(t,e,n=pt){let o=yt(t,e,{...n,type:r})
if(o)return o
const i=n.gte,f=void 0!==i,s=n.lte,l=void 0!==s,u=n.mod,a=void 0!==u
return o=lt(c,i,f)||lt(g,s,l)||lt(d,u,a,!0)||(f&&l&&i>s?B+"gte` > `options.lte`":isNaN(t)?G+Q+r:f&&i>t?t+K+c+" "+i:l&&s<t?t+K+g+" "+s:a&&t%u?t+" is not divisible by "+u:""),
!!o&&T(n.begin,e)+o}function bt(t,e,n=pt){let i=yt(t,e,{...n,type:s})
if(i)return i
const r=n.is,f=void 0!==r,l=n.max,u=void 0!==l,c=n.min,p=void 0!==c,y=n.rx,g=void 0!==y
return i=ft(a,r,f,s)||lt(b,l,u,!1,!0)||lt(h,c,p,!1,!0)||ut(j,y,g)||(u&&p&&l<c?B+b+"` <"+U+h+"`":f&&-1==r.indexOf(t)?it(t)+L+it(r.join(":")):u&&l<t.length?it(t)+K+b+" "+l:p&&c>t.length?it(t)+K+h+" "+c:g&&!y.test(t)?it(t)+" fails "+(y instanceof RegExp?y:"custom test "+o):""),
!!i&&T(n.begin,e)+i}function ht(t,e,n=pt){let o=null===t?F+Q+f:V(t)?D+Q+f:typeof t!==f?H+X(typeof t)+z+tt:""
if(o)return T(n.begin,e)+o
const r=n.open,s=void 0!==r,l=n.schema,c=void 0!==l
return o=st(k,r,s)||ct(l,c),o?T(n.begin,e,"An object ")+o:function(t,e,n,o){const{begin:r,open:f,schema:s}=e
let l
if(n)for(const n in s){const{types:r}=s[n],f=t[n],c=typeof f,a=r&&r.filter(V)
if(r&&r.length)if(a.length&&V(f)){for(const t of a)if(0===t.length)continue
const t=f.length
let u,c=0,p=!1
t:for(const e of a){for(c=0;c<t;c++){u=f[c]
let t=!1
for(let n=0,o=e.length;n<o;n++)if(typeof u===e[n]){t=!0
break}if(!t)continue t}p=!0
break t}if(!p){const t=typeof u
l=[`${n}[${c}]`,R+(null===u?i:V(u)?w:C+X(t))+","+z+(1===a.length?q:E+I+q)+rt(r)]
break}const y=o?o+"."+n:n+I+O
for(let o=0;o<t;o++){const t=f[o],i={number:gt,object:ht,string:bt}[typeof t]
if(i){const r=i(t,`${y}[${o}]`,{begin:e.begin,...s[n]})
if(r)return r}}}else{if(-1===r.indexOf(c)){l=[n,R+(null===f?i:V(f)?w:C+X(c))+","+z+(1===r.length?q:E+I+q)+rt(r)]
break}{const t={number:gt,object:ht,string:bt}[c]
if(t){const i=t(f,o?o+"."+n:n+I+O,{begin:e.begin,...s[n]})
if(i)return i}}}else if(c===u){l=[n,R+"missing"]
break}}if(!f)for(const e in t)if(!s||!s[e]){l=[e,"is unexpected"]
break}return!!l&&T(r,o&&o+"."+l[0],"`"+l[0]+I+O+"` ")+l[1]}(t,n,c,e)}function dt(t,e,n=pt){
if(!V(t))return T(n.begin,e)+(null===t?F:H+X(typeof t))+M
const o=t.length,l=n.least,u=void 0!==l,c=n.most,a=void 0!==c,p=n.pass,g=void 0!==p,b=n.types,h=void 0!==b,d=lt(y,l,u,!1,!0)||lt(m,c,a,!1,!0)||st(v,p,g)||at(A,b,h)||(u&&a&&l>c?B+"least` > `options.most`":u&&l>o?"has length "+o+" < `options."+y+"` "+l:a&&c<o?"has length "+o+" > `options."+m+"` "+c:"")
return d?T(n.begin,e,"An array ")+d:function(t,e,n,o,l){const{begin:u,pass:c,types:a}=n,p=o&&a.length
for(let o=0;o<e;o++){const e=t[o],y=typeof e,g="["+o+"]"
if(p&&-1===a.indexOf(y))return T(u,l&&l+g,"`"+g+I+w+"` ")+R+(null===e?i:V(e)?w:C+X(y))+","+z+(1===a.length?q+X(a[0]):E+I+q+it(a.join(":")))
if(p&&y===f){const t=null===e?i:V(e)?w:""
if(t)return T(u,l&&l+g,"`"+g+I+w+"` ")+R+t+","+Q+f}if(c){const t=l?l+"["+o+"]":g+I+w
let i
switch(y){case r:if(i=gt(e,t,n),i)return i
break
case f:if(null===e)break
if(Array.isArray(e))break
if(i=ht(e,t,n),i)return i
break
case s:if(i=bt(e,t,n),i)return i}}}return!1}(t,o,n,h,e)}function mt(t,e,o=pt){return yt(t,e,{...o,type:n})}
function kt(t,e,n=pt){let l=null===t?F+Q+f:V(t)?D+Q+f:typeof t!==f?H+X(typeof t)+z+tt:""
if(l)return T(n.begin,e)+l
const u=Object.entries(t),c=u.length,a=n.key,g=void 0!==a,b=n.least,h=void 0!==b,d=n.most,k=void 0!==d,j=n.pass,x=void 0!==j,$=n.types,O=void 0!==$
return l=ut(p,a,g)||lt(y,b,h,!1,!0)||lt(m,d,k,!1,!0)||st(v,j,x)||at(A,$,O)||(h&&k&&b>d?B+"least` > `options.most`":h&&b>c?"has length "+c+" < `options."+y+"` "+b:k&&d<c?"has length "+c+" > `options."+m+"` "+d:""),
l?T(n.begin,e,"A dictionary ")+l:function(t,e,n,l,u,c){const{begin:a,key:p,pass:y,types:g}=n,b=u&&g.length
for(let u=0;u<e;u++){const[e,h]=t[u],d=typeof h
if(l&&!p.test(e)){const t=ot(e)
return T(a,c&&c+"."+t,"`"+t+I+N+"` ")+"fails "+(p instanceof RegExp?p:"custom test "+o)}
if(b&&-1===g.indexOf(d))return T(a,c&&c+"."+e,"`"+e+I+N+"` ")+R+(null===h?i:V(h)?w:C+X(d))+","+z+(1===g.length?q+X(g[0]):E+I+q+it(g.join(":")))
if(y){const t=c?c+"."+e:e+I+N
let o
switch(d){case r:if(o=gt(h,t,n),o)return o
break
case f:if(null===h)break
if(Array.isArray(h))break
if(o=ht(h,t,n),o)return o
break
case s:if(o=bt(h,t,n),o)return o}}}return!1}(u,c,n,g,O,e)}function vt(t,e,n=pt){return yt(t,e,{...n,type:o})}
function jt(t,e,n=pt){return null!==t&&T(n.begin,e)+(V(t)?D:H+X(typeof t))+z+i}function xt(t=pt,...e){const n=[]
return[n,...e.map((e=>At(t,e,n)))]}const At=(t,e,n)=>(o,i,r)=>{const f=e(o,i,{...t,...r})
return f&&n.push(f),f}
export{dt as aintaArray,mt as aintaBoolean,kt as aintaDictionary,vt as aintaFunction,jt as aintaNull,gt as aintaNumber,ht as aintaObject,bt as aintaString,yt as aintaType,xt as default}
