/**
 * https://www.npmjs.com/package/@0bdx/ainta
 * @version 0.0.15
 * @license Copyright (c) 2023 0bdx <0@0bdx.com> (0bdx.com)
 * SPDX-License-Identifier: MIT
 */
const e="array",t="bigint",n="boolean",o="function",i="null",r="number",f="object",s="string",l="symbol",u="undefined",c="gte",a="is",p="key",y="least",g="lte",b="max",d="min",h="mod",v="most",k="open",m="pass",j="rx",x="type",A="types",O="an ",$=O+e,w="a class",N="a dictionary",R=O+f,E=a+" ",z="one",I=" not ",U=" of ",q=" `options.",B="the"+q+A+"` ",C="cannot be validated,"+q,D=x+" ",F=E+$,G=E+i,H=E+"the special `NaN` value",J=E+D,K=a+I,L=" "+K,M=L+"in ",P=I+O+e,Q=K+O+e,S=I+"a regular ",T=I+D,V={}
function W(e,t,n=V){let o=ve(e,t,{...n,type:r})
if(o)return o
const i=n.gte,f=void 0!==i,s=n.is,l=void 0!==s,u=n.lte,p=void 0!==u,y=n.mod,b=void 0!==y
return o=be(c,i,f)||pe(a,s,l,r)||be(g,u,p)||be(h,y,b,!0)||(f&&p&&i>u?C+"gte` > `options.lte`":isNaN(e)?H+S+r:l&&-1==s.indexOf(e)?e+M+ue(s.join(":")):f&&i>e?e+L+c+" "+i:p&&u<e?e+L+g+" "+u:b&&e%y?e+" is not divisible by "+y:""),
!!o&&Z(n.begin,t)+o}function X(e,t,n=V){let o=null===e?G+S+f:_(e)?F+S+f:typeof e!==f?J+te(typeof e)+I+re:""
if(o)return Z(n.begin,t)+o
const i=n.open,r=void 0!==i,s=n.schema,l=void 0!==s
return o=ge(k,i,r)||he(s,l),o?Z(n.begin,t,"An object ")+o:ae(e,n,l,R,t)}function Y(e,t,n=V){let i=ve(e,t,{...n,type:s})
if(i)return i
const r=n.is,f=void 0!==r,l=n.max,u=void 0!==l,c=n.min,p=void 0!==c,y=n.rx,g=void 0!==y
return i=pe(a,r,f,s)||be(b,l,u,!1,!0)||be(d,c,p,!1,!0)||de(j,y,g)||(u&&p&&l<c?C+b+"` <"+q+d+"`":f&&-1==r.indexOf(e)?ue(e)+M+ue(r.join(":")):u&&l<e.length?ue(e)+L+b+" "+l:p&&c>e.length?ue(e)+L+d+" "+c:g&&!y.test(e)?ue(e)+" fails "+(y instanceof RegExp?y:"custom test "+o):""),
!!i&&Z(n.begin,t)+i}
const Z=(e,t,n)=>(e?e+": ":"")+(t?`\`${t}\` `:n||"A value "),_=Array.isArray,ee=e=>!_(e)&&-1!==[t,n,o,r,f,s,l,u].indexOf(e),te=e=>"'"+(Array.isArray(e)?e.join(":"):e)+"'",ne=te(n),oe=te(r),ie=te(o),re=te(f),fe=te(s),se=te(n+":"+r+":"+s),le=e=>{
const t=_(e)?e.join(":"):e
return encodeURI(t.length<=32?t:`${t.slice(0,21)}...${t.slice(-8)}`).replace(/%20/g," ")
},ue=e=>te(le(e)),ce=e=>te(e.map((e=>_(e)?`[${e.join(":")}]`:e)).join(":")),ae=(e,t,n,o,r)=>{
const{begin:f,open:s,schema:l}=t
let c
if(n)for(const n in l){const{types:f}=l[n],s=e[n],a=typeof s,p=f&&f.filter(_)
if(f&&f.length)if(p.length&&_(s)){for(const e of p)if(0===e.length)continue
const e=s.length
let u,a=0,y=!1
e:for(const t of p){for(a=0;a<e;a++){u=s[a]
let e=!1
for(let n=0,o=t.length;n<o;n++)if(typeof u===t[n]){e=!0
break}if(!e)continue e}y=!0
break e}if(!y){const e=typeof u
c=[`${n}[${a}]`,E+(null===u?i:_(u)?$:D+te(e))+","+I+(1===p.length?B:z+U+B)+ce(f)]
break}const g=r?r+"."+n:n+U+o
for(let o=0;o<e;o++){const e=s[o],i={number:W,object:X,string:Y}[typeof e]
if(i){const r=i(e,`${g}[${o}]`,{begin:t.begin,...l[n]})
if(r)return r}}}else{if(-1===f.indexOf(a)){c=[n,E+(null===s?i:_(s)?$:D+te(a))+","+I+(1===f.length?B:z+U+B)+ce(f)]
break}{const e={number:W,object:X,string:Y}[a]
if(e){const i=e(s,r?r+"."+n:n+U+o,{begin:t.begin,...l[n]})
if(i)return i}}}else if(a===u){c=[n,E+"missing"]
break}}if(!s)for(const t in e)if(!l||!l[t]){c=[t,"is unexpected"]
break}return!!c&&Z(f,r&&r+"."+c[0],"`"+c[0]+U+o+"` ")+c[1]},pe=(e,t,o,i)=>{if(o){
const o=null===t?G+P:_(t)?t.length?"":"is empty":J+te(typeof t)+P
if(o)return C+e+"` "+o
let f=!1
for(let o=0,l=t.length;o<l;o++){
const l=t[o],u=typeof l,c=null===l?G+T+se:_(l)?F+T+se:u!==n&&u!==r&&u!==s?J+te(u)+I+se:""
if(c)return C+e+"["+o+"]` "+c
u===i&&(f=!0)}if(!f)return C+e+"` contains no "+i+"s"}},ye=(e,t,n)=>{if(n){const n=null===t?G+P:_(t)?"":J+te(typeof t)+P
if(n)return C+e+"` "+n
for(let n=0,o=t.length;n<o;n++){
const o=t[n],i=null===o?G+T+fe:_(o)?F+T+fe:typeof o!==s?J+te(typeof o)+I+fe:ee(o)?"":ue(o)+I+"known"
if(i)return C+e+"["+n+"]` "+i}}},ge=(e,t,o)=>{if(o){
const o=null===t?G+T+ne:_(t)?F+T+ne:typeof t!==n?J+te(typeof t)+I+ne:""
if(o)return C+e+"` "+o}},be=(e,t,n,o,i)=>{if(n){
const n=null===t?G+T+oe:_(t)?F+T+oe:typeof t!==r?J+te(typeof t)+I+oe:isNaN(t)?H:o&&!t?"is zero":i&&t<0?"is negative":""
if(n)return C+e+"` "+n}},de=(e,t,n)=>{if(n){let n=null===t?G+T+re:_(t)?F+T+re:typeof t!==f?J+te(typeof t)+I+re:""
if(n)return C+e+"` "+n
const i=t.test
if(n=null===i?G+T+ie:_(i)?F+T+ie:typeof i!==o?J+te(typeof i)+I+ie:"",n)return C+e+".test` "+n}},he=(e,t)=>{if(t){
let t=null===e?G+T+re:_(e)?F+T+re:typeof e!==f?J+te(typeof e)+I+re:""
if(t)return C+"schema` "+t
for(const n in e){const o=e[n]
if(t=null===o?"` "+G+T+re:_(o)?"` "+F+T+re:typeof o!==f?"` "+J+te(typeof o)+I+re:"",!t)e:for(const e in o){const n=o[e]
if(e===A)if(t=null===n?"."+A+"` "+G+I+$:_(n)?"":"."+A+"` "+J+te(typeof n)+I+$,!t)for(let o=0,i=n.length;o<i;o++){
const i=n[o]
if(_(i))for(let n=0,r=i.length;n<r;n++){const r=i[n]
if(t=null===r?G+T+fe:_(r)?F+T+fe:typeof r!==s?J+te(typeof r)+I+fe:ee(r)?"":ue(r)+I+"known",t){
t="."+e+"["+o+"]["+n+"]` "+t
break e}}else if(t=null===i?G+T+fe:typeof i!==s?J+te(typeof i)+I+fe:ee(i)?"":ue(i)+I+"known",t){t="."+e+"["+o+"]` "+t
break e}}}if(t)return C+"schema."+n+t}}}
function ve(e,t,n=V){const o=n.type,i=typeof e
if(i===o)return!1
const r=Z(n.begin,t),f=x in n,l=f&&_(o)
if(f&&l){const e=ye(x,o,!0)
if(e)return r+e}else{const e=f?null===o?G+T+fe:typeof o!==s?J+te(typeof o)+I+fe:ee(o)?"":te(le(o))+I+"known":K+"set"
if(e)return r+C+x+"` "+e}if(!l)return r+(null===e?G+T:_(e)?F+T:J+te(i)+I)+te(o)
if(!_(e))return r+Q
const u=o.length,c=e.length
if(!u)return!1
for(let i=0;i<c;i++){const r=e[i]
let f=!1
for(let e=0;e<u;e++)if(typeof r===o[e]){f=!0
break}if(!f){const e="["+i+"]"
return Z(n.begin,t&&t+e,"`"+e+U+$+"` ")+(null===r?G+T:_(r)?F+T:J+te(typeof r)+I)+te(o.join(":"))}}return!1}
function ke(e,t,n=V){let i=ve(e,t,{...n,type:o})
if(i)return i
const r=n.open,f=void 0!==r,s=n.schema,l=void 0!==s
return i=ge(k,r,f)||he(s,l),i?Z(n.begin,t,"A class ")+i:ae(e,n,l,w,t)}function me(e,t,n=V){
if(!_(e))return Z(n.begin,t)+(null===e?G:J+te(typeof e))+P
const l=e.length,u=n.least,c=void 0!==u,a=n.most,p=void 0!==a,g=n.pass,b=void 0!==g,d=n.types,h=void 0!==d,k=be(y,u,c,!1,!0)||be(v,a,p,!1,!0)||ge(m,g,b)||ye(A,d,h)||(c&&p&&u>a?C+"least` > `options.most`":c&&u>l?"has length "+l+" < `options."+y+"` "+u:p&&a<l?"has length "+l+" > `options."+v+"` "+a:"")
return k?Z(n.begin,t,"An array ")+k:function(e,t,n,l,u){const{begin:c,pass:a,types:p}=n,y=l&&p.length
for(let l=0;l<t;l++){const t=e[l],g=typeof t,b="["+l+"]"
if(y&&-1===p.indexOf(g))return Z(c,u&&u+b,"`"+b+U+$+"` ")+E+(null===t?i:_(t)?$:D+te(g))+","+I+(1===p.length?B+te(p[0]):z+U+B+ue(p.join(":")))
if(y&&g===f){const e=null===t?i:_(t)?$:""
if(e)return Z(c,u&&u+b,"`"+b+U+$+"` ")+E+e+","+S+f}if(a){const e=u?u+"["+l+"]":b+U+$
let i
switch(g){case o:if(i=ke(t,e,n),i)return i
break
case r:if(i=W(t,e,n),i)return i
break
case f:if(null===t)break
if(Array.isArray(t))break
if(i=X(t,e,n),i)return i
break
case s:if(i=Y(t,e,n),i)return i}}}return!1}(e,l,n,h,t)}function je(e,t,o=V){let i=ve(e,t,{...o,type:n})
if(i)return i
const r=o.is,f=void 0!==r
return i=pe(a,r,f,n)||(f&&-1==r.indexOf(e)?e+M+ue(r.join(":")):""),!!i&&Z(o.begin,t)+i}function xe(e,t,n=V){
let l=null===e?G+S+f:_(e)?F+S+f:typeof e!==f?J+te(typeof e)+I+re:""
if(l)return Z(n.begin,t)+l
const u=Object.entries(e),c=u.length,a=n.key,g=void 0!==a,b=n.least,d=void 0!==b,h=n.most,k=void 0!==h,j=n.pass,x=void 0!==j,O=n.types,w=void 0!==O
return l=de(p,a,g)||be(y,b,d,!1,!0)||be(v,h,k,!1,!0)||ge(m,j,x)||ye(A,O,w)||(d&&k&&b>h?C+"least` > `options.most`":d&&b>c?"has length "+c+" < `options."+y+"` "+b:k&&h<c?"has length "+c+" > `options."+v+"` "+h:""),
l?Z(n.begin,t,"A dictionary ")+l:function(e,t,n,l,u,c){const{begin:a,key:p,pass:y,types:g}=n,b=u&&g.length
for(let u=0;u<t;u++){const[t,d]=e[u],h=typeof d
if(l&&!p.test(t)){const e=le(t)
return Z(a,c&&c+"."+e,"`"+e+U+N+"` ")+"fails "+(p instanceof RegExp?p:"custom test "+o)}
if(b&&-1===g.indexOf(h))return Z(a,c&&c+"."+t,"`"+t+U+N+"` ")+E+(null===d?i:_(d)?$:D+te(h))+","+I+(1===g.length?B+te(g[0]):z+U+B+ue(g.join(":")))
if(y){const e=c?c+"."+t:t+U+N
let i
switch(h){case o:if(i=ke(d,e,n),i)return i
break
case r:if(i=W(d,e,n),i)return i
break
case f:if(null===d)break
if(Array.isArray(d))break
if(i=X(d,e,n),i)return i
break
case s:if(i=Y(d,e,n),i)return i}}}return!1}(u,c,n,g,w,t)}function Ae(e,t,n=V){
return null!==e&&Z(n.begin,t)+(_(e)?F:J+te(typeof e))+I+i}function Oe(e=V,...t){const n=[]
return[n,...t.map((t=>$e(e,t,n)))]}const $e=(e,t,n)=>(o,i,r)=>{const f=t(o,i,{...e,...r})
return f&&n.push(f),f}
export{me as aintaArray,je as aintaBoolean,xe as aintaDictionary,ke as aintaFunction,Ae as aintaNull,W as aintaNumber,X as aintaObject,Y as aintaString,ve as aintaType,Oe as default}
