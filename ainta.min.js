/**
 * https://www.npmjs.com/package/@0bdx/ainta
 * @version 0.0.14
 * @license Copyright (c) 2023 0bdx <0@0bdx.com> (0bdx.com)
 * SPDX-License-Identifier: MIT
 */
const t="array",e="bigint",n="boolean",o="function",i="null",r="number",f="object",s="string",l="symbol",u="undefined",c="enum",a="gte",p="key",y="least",g="lte",b="max",h="min",d="mod",m="most",k="open",v="pass",x="rx",j="type",A="types",$="an ",w=$+t,N="a dictionary",O=$+f,R="is ",E="one",z=" not ",I=" of ",U=" `options.",q="the"+U+A+"` ",B="cannot be validated,"+U,C=j+" ",D=R+w,F=R+i,G=R+"the special `NaN` value",H=R+C,J="is"+z,K=" "+J,L=z+$+t,M=J+$+t,P=z+"a regular ",Q=z+C,S=(t,e,n)=>(t?t+": ":"")+(e?`\`${e}\` `:n||"A value "),T=Array.isArray,V=t=>!T(t)&&-1!==[e,n,o,r,f,s,l,u].indexOf(t),W=t=>"'"+(Array.isArray(t)?t.join(":"):t)+"'",X=W(n),Y=W(r),Z=W(o),_=W(f),tt=W(s),et=t=>{
const e=T(t)?t.join(":"):t
return encodeURI(e.length<=32?e:`${e.slice(0,21)}...${e.slice(-8)}`).replace(/%20/g," ")
},nt=t=>W(et(t)),ot=t=>W(t.map((t=>T(t)?`[${t.join(":")}]`:t)).join(":")),it=(t,e,n,o)=>{if(n){
const n=null===e?F+L:T(e)?o||e.length?"":"is empty":H+W(typeof e)+L
if(n)return B+t+"` "+n
for(let n=0,i=e.length;n<i;n++){
const i=e[n],r=null===i?F+Q+tt:T(i)?D+Q+tt:typeof i!==s?H+W(typeof i)+z+tt:o&&!V(i)?nt(i)+z+"known":""
if(r)return B+t+"["+n+"]` "+r}}},rt=(t,e,o)=>{if(o){const o=null===e?F+Q+X:T(e)?D+Q+X:typeof e!==n?H+W(typeof e)+z+X:""
if(o)return B+t+"` "+o}},ft=(t,e,n,o,i)=>{if(n){
const n=null===e?F+Q+Y:T(e)?D+Q+Y:typeof e!==r?H+W(typeof e)+z+Y:isNaN(e)?G:o&&!e?"is zero":i&&e<0?"is negative":""
if(n)return B+t+"` "+n}},st=(t,e,n)=>{if(n){let n=null===e?F+Q+_:T(e)?D+Q+_:typeof e!==f?H+W(typeof e)+z+_:""
if(n)return B+t+"` "+n
const i=e.test
if(n=null===i?F+Q+Z:T(i)?D+Q+Z:typeof i!==o?H+W(typeof i)+z+Z:"",n)return B+t+".test` "+n}},lt=(t,e)=>{if(e){
let e=null===t?F+Q+_:T(t)?D+Q+_:typeof t!==f?H+W(typeof t)+z+_:""
if(e)return B+"schema` "+e
for(const n in t){const o=t[n]
if(e=null===o?"` "+F+Q+_:T(o)?"` "+D+Q+_:typeof o!==f?"` "+H+W(typeof o)+z+_:"",!e)t:for(const t in o){const n=o[t]
if(t===A)if(e=null===n?"."+A+"` "+F+z+w:T(n)?"":"."+A+"` "+H+W(typeof n)+z+w,!e)for(let o=0,i=n.length;o<i;o++){
const i=n[o]
if(T(i))for(let n=0,r=i.length;n<r;n++){const r=i[n]
if(e=null===r?F+Q+tt:T(r)?D+Q+tt:typeof r!==s?H+W(typeof r)+z+tt:V(r)?"":nt(r)+z+"known",e){e="."+t+"["+o+"]["+n+"]` "+e
break t}}else if(e=null===i?F+Q+tt:typeof i!==s?H+W(typeof i)+z+tt:V(i)?"":nt(i)+z+"known",e){e="."+t+"["+o+"]` "+e
break t}}}if(e)return B+"schema."+n+e}}},ut={}
function ct(t,e,n=ut){const o=n.type,i=typeof t
if(i===o)return!1
const r=S(n.begin,e),f=j in n,l=f&&T(o)
if(f&&l){const t=it(j,o,!0,!0)
if(t)return r+t}else{const t=f?null===o?F+Q+tt:typeof o!==s?H+W(typeof o)+z+tt:V(o)?"":W(et(o))+z+"known":J+"set"
if(t)return r+B+j+"` "+t}if(!l)return r+(null===t?F+Q:T(t)?D+Q:H+W(i)+z)+W(o)
if(!T(t))return r+M
const u=o.length,c=t.length
if(!u)return!1
for(let i=0;i<c;i++){const r=t[i]
let f=!1
for(let t=0;t<u;t++)if(typeof r===o[t]){f=!0
break}if(!f){const t="["+i+"]"
return S(n.begin,e&&e+t,"`"+t+I+w+"` ")+(null===r?F+Q:T(r)?D+Q:H+W(typeof r)+z)+W(o.join(":"))}}return!1}
function at(t,e,n=ut){let o=ct(t,e,{...n,type:r})
if(o)return o
const i=n.gte,f=void 0!==i,s=n.lte,l=void 0!==s,u=n.mod,c=void 0!==u
return o=ft(a,i,f)||ft(g,s,l)||ft(d,u,c,!0)||(f&&l&&i>s?B+"gte` > `options.lte`":isNaN(t)?G+P+r:f&&i>t?t+K+a+" "+i:l&&s<t?t+K+g+" "+s:c&&t%u?t+" is not divisible by "+u:""),
!!o&&S(n.begin,e)+o}function pt(t,e,n=ut){let i=ct(t,e,{...n,type:s})
if(i)return i
const r=n.enum,f=void 0!==r,l=n.max,u=void 0!==l,a=n.min,p=void 0!==a,y=n.rx,g=void 0!==y
return i=it(c,r,f)||ft(b,l,u,!1,!0)||ft(h,a,p,!1,!0)||st(x,y,g)||(u&&p&&l<a?B+"max` < `options.min`":f&&-1==r.indexOf(t)?nt(t)+" is not in "+nt(r.join(":")):u&&l<t.length?nt(t)+K+b+" "+l:p&&a>t.length?nt(t)+K+h+" "+a:g&&!y.test(t)?nt(t)+" fails "+(y instanceof RegExp?y:"custom test "+o):""),
!!i&&S(n.begin,e)+i}function yt(t,e,n=ut){let o=null===t?F+P+f:T(t)?D+P+f:typeof t!==f?H+W(typeof t)+z+_:""
if(o)return S(n.begin,e)+o
const r=n.open,s=void 0!==r,l=n.schema,c=void 0!==l
return o=rt(k,r,s)||lt(l,c),o?S(n.begin,e,"An object ")+o:function(t,e,n,o){const{begin:r,open:f,schema:s}=e
let l
if(n)for(const n in s){const{types:r}=s[n],f=t[n],c=typeof f,a=r&&r.filter(T)
if(r&&r.length)if(a.length&&T(f)){for(const t of a)if(0===t.length)continue
const t=f.length
let u,c=0,p=!1
t:for(const e of a){for(c=0;c<t;c++){u=f[c]
let t=!1
for(let n=0,o=e.length;n<o;n++)if(typeof u===e[n]){t=!0
break}if(!t)continue t}p=!0
break t}if(!p){const t=typeof u
l=[`${n}[${c}]`,R+(null===u?i:T(u)?w:C+W(t))+","+z+(1===a.length?q:E+I+q)+ot(r)]
break}const y=o?o+"."+n:n+I+O
for(let o=0;o<t;o++){const t=f[o],i={number:at,object:yt,string:pt}[typeof t]
if(i){const r=i(t,`${y}[${o}]`,{begin:e.begin,...s[n]})
if(r)return r}}}else{if(-1===r.indexOf(c)){l=[n,R+(null===f?i:T(f)?w:C+W(c))+","+z+(1===r.length?q:E+I+q)+ot(r)]
break}{const t={number:at,object:yt,string:pt}[c]
if(t){const i=t(f,o?o+"."+n:n+I+O,{begin:e.begin,...s[n]})
if(i)return i}}}else if(c===u){l=[n,R+"missing"]
break}}if(!f)for(const e in t)if(!s||!s[e]){l=[e,"is unexpected"]
break}return!!l&&S(r,o&&o+"."+l[0],"`"+l[0]+I+O+"` ")+l[1]}(t,n,c,e)}function gt(t,e,n=ut){
if(!T(t))return S(n.begin,e)+(null===t?F:H+W(typeof t))+L
const o=t.length,l=n.least,u=void 0!==l,c=n.most,a=void 0!==c,p=n.pass,g=void 0!==p,b=n.types,h=void 0!==b,d=ft(y,l,u,!1,!0)||ft(m,c,a,!1,!0)||rt(v,p,g)||it(A,b,h,!0)||(u&&a&&l>c?B+"least` > `options.most`":u&&l>o?"has length "+o+" < `options."+y+"` "+l:a&&c<o?"has length "+o+" > `options."+m+"` "+c:"")
return d?S(n.begin,e,"An array ")+d:function(t,e,n,o,l){const{begin:u,pass:c,types:a}=n,p=o&&a.length
for(let o=0;o<e;o++){const e=t[o],y=typeof e,g="["+o+"]"
if(p&&-1===a.indexOf(y))return S(u,l&&l+g,"`"+g+I+w+"` ")+R+(null===e?i:T(e)?w:C+W(y))+","+z+(1===a.length?q+W(a[0]):E+I+q+nt(a.join(":")))
if(p&&y===f){const t=null===e?i:T(e)?w:""
if(t)return S(u,l&&l+g,"`"+g+I+w+"` ")+R+t+","+P+f}if(c){const t=l?l+"["+o+"]":g+I+w
let i
switch(y){case r:if(i=at(e,t,n),i)return i
break
case f:if(null===e)break
if(Array.isArray(e))break
if(i=yt(e,t,n),i)return i
break
case s:if(i=pt(e,t,n),i)return i}}}return!1}(t,o,n,h,e)}function bt(t,e,o=ut){return ct(t,e,{...o,type:n})}
function ht(t,e,n=ut){let l=null===t?F+P+f:T(t)?D+P+f:typeof t!==f?H+W(typeof t)+z+_:""
if(l)return S(n.begin,e)+l
const u=Object.entries(t),c=u.length,a=n.key,g=void 0!==a,b=n.least,h=void 0!==b,d=n.most,k=void 0!==d,x=n.pass,j=void 0!==x,$=n.types,O=void 0!==$
return l=st(p,a,g)||ft(y,b,h,!1,!0)||ft(m,d,k,!1,!0)||rt(v,x,j)||it(A,$,O,!0)||(h&&k&&b>d?B+"least` > `options.most`":h&&b>c?"has length "+c+" < `options."+y+"` "+b:k&&d<c?"has length "+c+" > `options."+m+"` "+d:""),
l?S(n.begin,e,"A dictionary ")+l:function(t,e,n,l,u,c){const{begin:a,key:p,pass:y,types:g}=n,b=u&&g.length
for(let u=0;u<e;u++){const[e,h]=t[u],d=typeof h
if(l&&!p.test(e)){const t=et(e)
return S(a,c&&c+"."+t,"`"+t+I+N+"` ")+"fails "+(p instanceof RegExp?p:"custom test "+o)}
if(b&&-1===g.indexOf(d))return S(a,c&&c+"."+e,"`"+e+I+N+"` ")+R+(null===h?i:T(h)?w:C+W(d))+","+z+(1===g.length?q+W(g[0]):E+I+q+nt(g.join(":")))
if(y){const t=c?c+"."+e:e+I+N
let o
switch(d){case r:if(o=at(h,t,n),o)return o
break
case f:if(null===h)break
if(Array.isArray(h))break
if(o=yt(h,t,n),o)return o
break
case s:if(o=pt(h,t,n),o)return o}}}return!1}(u,c,n,g,O,e)}function dt(t,e,n=ut){return ct(t,e,{...n,type:o})}
function mt(t,e,n=ut){return null!==t&&S(n.begin,e)+(T(t)?D:H+W(typeof t))+z+i}function kt(t=ut,...e){const n=[]
return[n,...e.map((e=>vt(t,e,n)))]}const vt=(t,e,n)=>(o,i,r)=>{const f=e(o,i,{...t,...r})
return f&&n.push(f),f}
export{gt as aintaArray,bt as aintaBoolean,ht as aintaDictionary,dt as aintaFunction,mt as aintaNull,at as aintaNumber,yt as aintaObject,pt as aintaString,ct as aintaType,kt as default}
