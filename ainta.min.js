/**
 * https://www.npmjs.com/package/@0bdx/ainta
 * @version 0.0.14
 * @license Copyright (c) 2023 0bdx <0@0bdx.com> (0bdx.com)
 * SPDX-License-Identifier: MIT
 */
const t="array",n="bigint",e="boolean",o="function",i="null",r="number",s="object",f="string",l="symbol",u="undefined",c="enum",a="gte",p="key",y="least",g="lte",b="max",d="min",h="mod",m="most",v="open",k="pass",x="rx",A="type",j="types",N="an ",O=N+t,w="a dictionary",R=N+s,$="is ",E="one",z=" not ",I=" of ",U="the",q=" `options.",B="cannot be validated,"+q,C=A+" ",D=$+O,F=$+i,G=$+"the special `NaN` value",H=$+C,J="is"+z,K=" "+J,L=z+N+t,M=J+N+t,P=z+"a regular ",Q=z+C,S=(t,n,e)=>(t?t+": ":"")+(n?`\`${n}\` `:e||"A value "),T=Array.isArray,V=t=>!T(t)&&-1!==[n,e,o,r,s,f,l,u].indexOf(t),W=t=>"'"+(Array.isArray(t)?t.join(":"):t)+"'",X=W(e),Y=W(r),Z=W(o),_=W(s),tt=W(f),nt=t=>{
const n=T(t)?t.join(":"):t
return encodeURI(n.length<=32?n:`${n.slice(0,21)}...${n.slice(-8)}`).replace(/%20/g," ")},et=t=>W(nt(t)),ot=(t,n,e,o)=>{
if(e){const e=null===n?F+L:T(n)?o||n.length?"":"is empty":H+W(typeof n)+L
if(e)return B+t+"` "+e
for(let e=0,i=n.length;e<i;e++){
const i=n[e],r=null===i?F+Q+tt:T(i)?D+Q+tt:typeof i!==f?H+W(typeof i)+z+tt:o&&!V(i)?et(i)+z+"known":""
if(r)return B+t+"["+e+"]` "+r}}},it=(t,n,o)=>{if(o){const o=null===n?F+Q+X:T(n)?D+Q+X:typeof n!==e?H+W(typeof n)+z+X:""
if(o)return B+t+"` "+o}},rt=(t,n,e,o,i)=>{if(e){
const e=null===n?F+Q+Y:T(n)?D+Q+Y:typeof n!==r?H+W(typeof n)+z+Y:isNaN(n)?G:o&&!n?"is zero":i&&n<0?"is negative":""
if(e)return B+t+"` "+e}},st=(t,n,e)=>{if(e){let e=null===n?F+Q+_:T(n)?D+Q+_:typeof n!==s?H+W(typeof n)+z+_:""
if(e)return B+t+"` "+e
const i=n.test
if(e=null===i?F+Q+Z:T(i)?D+Q+Z:typeof i!==o?H+W(typeof i)+z+Z:"",e)return B+t+".test` "+e}},ft=(t,n)=>{if(n){
let n=null===t?F+Q+_:T(t)?D+Q+_:typeof t!==s?H+W(typeof t)+z+_:""
if(n)return B+"schema` "+n
for(const e in t){const o=t[e]
if(n=null===o?"` "+F+Q+_:T(o)?"` "+D+Q+_:typeof o!==s?"` "+H+W(typeof o)+z+_:"",!n)t:for(const t in o){const e=o[t]
if(t===j)if(n=null===e?"."+j+"` "+F+z+O:T(e)?"":"."+j+"` "+H+W(typeof e)+z+O,!n)for(let o=0,i=e.length;o<i;o++){
const i=e[o]
if(n=null===i?F+Q+tt:T(i)?D+Q+tt:typeof i!==f?H+W(typeof i)+z+tt:V(i)?"":et(i)+z+"known",n){n="."+t+"["+o+"]` "+n
break t}}}if(n)return B+"schema."+e+n}}},lt={}
function ut(t,n,e=lt){const o=e.type,i=typeof t
if(i===o)return!1
const r=S(e.begin,n),s=A in e,l=s&&T(o)
if(s&&l){const t=ot(A,o,!0,!0)
if(t)return r+t}else{const t=s?null===o?F+Q+tt:typeof o!==f?H+W(typeof o)+z+tt:V(o)?"":W(nt(o))+z+"known":J+"set"
if(t)return r+B+A+"` "+t}if(!l)return r+(null===t?F+Q:T(t)?D+Q:H+W(i)+z)+W(o)
if(!T(t))return r+M
const u=o.length,c=t.length
if(!u)return!1
for(let i=0;i<c;i++){const r=t[i]
let s=!1
for(let t=0;t<u;t++)if(typeof r===o[t]){s=!0
break}if(!s){const t="["+i+"]"
return S(e.begin,n&&n+t,"`"+t+I+O+"` ")+(null===r?F+Q:T(r)?D+Q:H+W(typeof r)+z)+W(o.join(":"))}}return!1}
function ct(t,n,e=lt){let o=ut(t,n,{...e,type:r})
if(o)return o
const i=e.gte,s=void 0!==i,f=e.lte,l=void 0!==f,u=e.mod,c=void 0!==u
return o=rt(a,i,s)||rt(g,f,l)||rt(h,u,c,!0)||(s&&l&&i>f?B+"gte` > `options.lte`":isNaN(t)?G+P+r:s&&i>t?t+K+a+" "+i:l&&f<t?t+K+g+" "+f:c&&t%u?t+" is not divisible by "+u:""),
!!o&&S(e.begin,n)+o}function at(t,n,e=lt){let i=ut(t,n,{...e,type:f})
if(i)return i
const r=e.enum,s=void 0!==r,l=e.max,u=void 0!==l,a=e.min,p=void 0!==a,y=e.rx,g=void 0!==y
return i=ot(c,r,s)||rt(b,l,u,!1,!0)||rt(d,a,p,!1,!0)||st(x,y,g)||(u&&p&&l<a?B+"max` < `options.min`":s&&-1==r.indexOf(t)?et(t)+" is not in "+et(r.join(":")):u&&l<t.length?et(t)+K+b+" "+l:p&&a>t.length?et(t)+K+d+" "+a:g&&!y.test(t)?et(t)+" fails "+(y instanceof RegExp?y:"custom test "+o):""),
!!i&&S(e.begin,n)+i}function pt(t,n,e=lt){let o=null===t?F+P+s:T(t)?D+P+s:typeof t!==s?H+W(typeof t)+z+_:""
if(o)return S(e.begin,n)+o
const r=e.open,f=void 0!==r,l=e.schema,c=void 0!==l
return o=it(v,r,f)||ft(l,c),o?S(e.begin,n,"An object ")+o:function(t,n,e,o){const{begin:r,open:s,schema:f}=n
let l
if(e)for(const e in f){const{types:r}=f[e],s=t[e],c=typeof s
if(r&&r.length){if(-1===r.indexOf(c)){const t=U+q+j+"` "
l=[e,$+(null===s?i:T(s)?O:C+W(c))+","+z+(1===r.length?t+W(r[0]):E+I+t+et(r.join(":")))]
break}{const t={number:ct,string:at}[c]
if(t){const i=t(s,o?o+"."+e:e+I+R,{begin:n.begin,...f[e]})
if(i)return i}}}else if(c===u){l=[e,$+"missing"]
break}}if(!s)for(const n in t)if(!f||!f[n]){l=[n,"is unexpected"]
break}return!!l&&S(r,o&&o+"."+l[0],"`"+l[0]+I+R+"` ")+l[1]}(t,e,c,n)}function yt(t,n,e=lt){
if(!T(t))return S(e.begin,n)+(null===t?F:H+W(typeof t))+L
const o=t.length,l=e.least,u=void 0!==l,c=e.most,a=void 0!==c,p=e.pass,g=void 0!==p,b=e.types,d=void 0!==b,h=rt(y,l,u,!1,!0)||rt(m,c,a,!1,!0)||it(k,p,g)||ot(j,b,d,!0)||(u&&a&&l>c?B+"least` > `options.most`":u&&l>o?"has length "+o+" < `options."+y+"` "+l:a&&c<o?"has length "+o+" > `options."+m+"` "+c:"")
return h?S(e.begin,n,"An array ")+h:function(t,n,e,o,l){const{begin:u,pass:c,types:a}=e,p=o&&a.length
for(let o=0;o<n;o++){const n=t[o],y=typeof n,g="["+o+"]"
if(p&&-1===a.indexOf(y)){const t=U+q+j+"` "
return S(u,l&&l+g,"`"+g+I+O+"` ")+$+(null===n?i:T(n)?O:C+W(y))+","+z+(1===a.length?t+W(a[0]):E+I+t+et(a.join(":")))}
if(p&&y===s){const t=null===n?i:T(n)?O:""
if(t)return S(u,l&&l+g,"`"+g+I+O+"` ")+$+t+","+P+s}if(c){const t=l?l+"["+o+"]":g+I+O
let i
switch(y){case r:if(i=ct(n,t,e),i)return i
break
case s:if(null===n)break
if(Array.isArray(n))break
if(i=pt(n,t,e),i)return i
break
case f:if(i=at(n,t,e),i)return i}}}return!1}(t,o,e,d,n)}function gt(t,n,o=lt){return ut(t,n,{...o,type:e})}
function bt(t,n,e=lt){let l=null===t?F+P+s:T(t)?D+P+s:typeof t!==s?H+W(typeof t)+z+_:""
if(l)return S(e.begin,n)+l
const u=Object.entries(t),c=u.length,a=e.key,g=void 0!==a,b=e.least,d=void 0!==b,h=e.most,v=void 0!==h,x=e.pass,A=void 0!==x,N=e.types,R=void 0!==N
return l=st(p,a,g)||rt(y,b,d,!1,!0)||rt(m,h,v,!1,!0)||it(k,x,A)||ot(j,N,R,!0)||(d&&v&&b>h?B+"least` > `options.most`":d&&b>c?"has length "+c+" < `options."+y+"` "+b:v&&h<c?"has length "+c+" > `options."+m+"` "+h:""),
l?S(e.begin,n,"A dictionary ")+l:function(t,n,e,l,u,c){const{begin:a,key:p,pass:y,types:g}=e,b=u&&g.length
for(let u=0;u<n;u++){const[n,d]=t[u],h=typeof d
if(l&&!p.test(n)){const t=nt(n)
return S(a,c&&c+"."+t,"`"+t+I+w+"` ")+"fails "+(p instanceof RegExp?p:"custom test "+o)}if(b&&-1===g.indexOf(h)){
const t=U+q+j+"` "
return S(a,c&&c+"."+n,"`"+n+I+w+"` ")+$+(null===d?i:T(d)?O:C+W(h))+","+z+(1===g.length?t+W(g[0]):E+I+t+et(g.join(":")))}
if(y){const t=c?c+"."+n:n+I+w
let o
switch(h){case r:if(o=ct(d,t,e),o)return o
break
case s:if(null===d)break
if(Array.isArray(d))break
if(o=pt(d,t,e),o)return o
break
case f:if(o=at(d,t,e),o)return o}}}return!1}(u,c,e,g,R,n)}function dt(t,n,e=lt){return ut(t,n,{...e,type:o})}
function ht(t,n,e=lt){return null!==t&&S(e.begin,n)+(T(t)?D:H+W(typeof t))+z+i}function mt(t=lt,...n){const e=[]
return[e,...n.map((n=>vt(t,n,e)))]}const vt=(t,n,e)=>(o,i,r)=>{const s=n(o,i,{...t,...r})
return s&&e.push(s),s}
export{yt as aintaArray,gt as aintaBoolean,bt as aintaDictionary,dt as aintaFunction,ht as aintaNull,ct as aintaNumber,pt as aintaObject,at as aintaString,ut as aintaType,mt as default}
